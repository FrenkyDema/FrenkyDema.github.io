<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Frenky Dema's personal GitHub profile page"
    />
    <meta name="author" content="Frenky Dema" />
    <title>Frenky Dema - Profile</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <div class="profile-section" id="profile-section"></div>

      <div class="row">
        <div class="card" id="latest-updates-section"></div>

        <div class="card" id="repositories-section"></div>

        <div class="card" id="statistics-section"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      /**
       * Loads HTML content into a specified section and then loads an associated script.
       * @param {string} sectionId - The ID of the element to load HTML into.
       * @param {string} url - The URL of the HTML file to fetch.
       * @param {string} [scriptUrl] - Optional. The URL of the JavaScript file to load after HTML.
       */
      function loadSection(sectionId, url, scriptUrl) {
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            const sectionElement = document.getElementById(sectionId);
            if (sectionElement) {
              sectionElement.innerHTML = data;
            } else {
              console.error(`Element with ID '${sectionId}' not found.`);
              return; // Stop if the target element doesn't exist
            }

            if (scriptUrl) {
              const script = document.createElement("script");
              script.src = scriptUrl;
              script.onload = function () {
                console.log(`${scriptUrl} has been loaded and executed.`);
              };
              script.onerror = function () {
                console.error(`Error loading script: ${scriptUrl}`);
              };
              document.body.appendChild(script);
            }
          })
          .catch((error) => console.error("Error loading section:", error));
      }

      // Load the sections and their respective scripts
      // Removed 'profile/profile.js' as it was redundant
      loadSection("profile-section", "profile/profile.html");
      loadSection(
        "latest-updates-section",
        "latest-updates/latest-updates.html",
        "latest-updates/latest-updates.js"
      );
      loadSection(
        "repositories-section",
        "repositories/repositories.html",
        "repositories/repositories.js"
      );
      loadSection(
        "statistics-section",
        "statistics/statistics.html",
        "statistics/statistics.js"
      );
    </script>
  </body>
</html>
